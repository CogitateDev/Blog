<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><title>Linux batch file manipulation - based on find,xargs &#183; Deep thinking</title>
<meta name=title content="Linux batch file manipulation - based on find,xargs &#183; Deep thinking"><script type=text/javascript src=/js/appearance.min.022d0ebc3b46a335eb1c7ef79b7f2de143d7cd5156d433638592ef1ce5f8554e.js integrity="sha256-Ai0OvDtGozXrHH73m38t4UPXzVFW1DNjhZLvHOX4VU4="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.2dd44849efa9d0ef68e8cdede2901f86dec79026811f5cf6b25aa2b8cd8ee63e.css integrity="sha256-LdRISe+p0O9o6M3t4pAfht7HkCaBH1z2slqiuM2O5j4="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.f29ffdffd9ab4cc95250c3c7196b2d5dae8ee6ef0a4139451073f90183ae7e31.js integrity="sha256-8p/9/9mrTMlSUMPHGWstXa6O5u8KQTlFEHP5AYOufjE=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      Linux batch file manipulation - based on find,xargs
    "><link rel=canonical href=https://bravebuffalo.cc/en/post/Linux%20batch%20file%20manipulation%20-%20based%20on%20find,xargs.html><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Linux batch file manipulation - based on find,xargs"><meta property="og:description" content="Linux batch file manipulation - based on find,xargs"><meta property="og:type" content="article"><meta property="og:url" content="https://bravebuffalo.cc/en/post/Linux%20batch%20file%20manipulation%20-%20based%20on%20find,xargs.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-18T21:19:39+08:00"><meta property="article:modified_time" content="2022-02-18T21:19:39+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux batch file manipulation - based on find,xargs"><meta name=twitter:description content="Linux batch file manipulation - based on find,xargs"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Linux batch file manipulation - based on find,xargs","headline":"Linux batch file manipulation - based on find,xargs","description":"Linux batch file manipulation - based on find,xargs","abstract":"Preface #In the beginning stages of a project, it is common to encounter various file operations, copying header files, libraries, batch renaming, and so on. Once the file structure is complex, this will be a boring job.\nFind the files #find searches for files in the directory structure, which is how it is described inside man.","inLanguage":"en","url":"https:\/\/bravebuffalo.cc\/en\/post\/Linux%20batch%20file%20manipulation%20-%20based%20on%20find,xargs.html","author":{"@type":"Person","name":"Deep thinking"},"copyrightYear":"2022","dateCreated":"2022-02-18T21:19:39\u002b08:00","datePublished":"2022-02-18T21:19:39\u002b08:00","dateModified":"2022-02-18T21:19:39\u002b08:00","keywords":["Linux","shell","Command line"],"mainEntityOfPage":"true","wordCount":"2027"}</script><meta name=author content="Deep thinking"><link href=mailto:honguilee@163.com rel=me><link href=https://github.com/hongui rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold pe-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a href=/en/ class=mr-2><img src=/images/logo.png width=500 height=500 class="max-h-[10rem] max-w-[10rem] object-scale-down object-left" alt="Deep thinking">
</a><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/en/>Deep thinking</a></div><ul class="flex flex-col list-none text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/en/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/en/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/en/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">about</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><button id=search-button-1 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><div class="relative group"><button class="flex items-center justify-end w-full transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600">
<span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentcolor" d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/><path fill="currentcolor" d="M0 2a2 2 0 012-2h7a2 2 0 012 2v3h3a2 2 0 012 2v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-3H2A2 2 0 010 9V2zm2-1A1 1 0 001 2v7a1 1 0 001 1h7a1 1 0 001-1V2A1 1 0 009 1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066.0 01-.415-.492 1.988 1.988.0 01-.94.31z"/></svg></span><span class=text-sm>EN</span><span class=text-[0.6rem]><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3.0l192-192c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3l192 192z"/></svg></span></span></button><div class="invisible w-full h-2 bg-transparent group-hover:visible"></div><div class="top-8 invisible absolute ltr:right-0 rtl:left-0 z-50 flex flex-col whitespace-nowrap rounded border border-neutral-300 bg-neutral text-start text-base shadow group-hover:visible dark:border-neutral-600 dark:bg-neutral-800"><div class="flex flex-grow"><a href=/en/post/Linux%20batch%20file%20manipulation%20-%20based%20on%20find,xargs.html class="flex items-center justify-between w-full px-2 py-1 bg-primary-100 dark:bg-primary-900">English<span class="w-6 ms-2 text-primary-600 dark:text-primary-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M438.6 105.4c12.5 12.5 12.5 32.7.0 45.2l-256 256c-12.5 12.5-32.7 12.5-45.2.0L9.372 278.6c-12.496-12.5-12.496-32.7.0-45.2 12.498-12.5 32.758-12.5 45.258.0L159.1 338.7 393.4 105.4c12.5-12.52 32.7-12.52 45.2.0h0z"/></svg></span></span></a></div><div class="flex flex-grow"><a href=/post/Linux%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8Efind,xargs.html class="w-full py-1 pe-10 ps-2 decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2">简体中文</a></div></div></div></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Linux batch file manipulation - based on find,xargs</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-02-18 21:19:39 +0800 +0800">18 February 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">10 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-prose grow"><h3 id=preface class="relative group">Preface <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#preface aria-label=Anchor>#</a></span></h3><p>In the beginning stages of a project, it is common to encounter various file operations, copying header files, libraries, batch renaming, and so on. Once the file structure is complex, this will be a boring job.</p><h3 id=find-the-files class="relative group">Find the files <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#find-the-files aria-label=Anchor>#</a></span></h3><p><code>find</code> searches for files in the directory structure, which is how it is described inside <code>man</code>. So how do you search? There are various ways, by file time, by size, by filename, by pathname, by file type, by permissions, by user. These methods can be combined with or without logic to accomplish more demanding searches, which is a boon to file searching.
Usually, the introduction of a command starts with a command, <code>find</code>, in the following format</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find <span class=o>[</span>-H<span class=o>]</span> <span class=o>[</span>-L<span class=o>]</span> <span class=o>[</span>-P<span class=o>]</span> <span class=o>[</span>-D debugopts<span class=o>]</span> <span class=o>[</span>-Olevel<span class=o>]</span> <span class=o>[</span>starting-point...<span class=o>]</span> <span class=o>[</span>expression<span class=o>]</span>
</span></span></code></pre></div><p>[-H] [-L] [-P] [-D debugopts] [-Olevel] it doesn&rsquo;t matter.
[-H] [-L] [-P] it&rsquo;s for soft link, not commonly used.[-D debugopts]is to display additional information during the run, information that is too cluttered and mixed to be of much use.[-Olevel]On the other hand, it is used to optimize the lookup, and the default is sufficient, so there is no need to go deeper.
The biggest magic of <code>find</code> is in the <code>[expression]</code> at the end, and the following is an example of how this <code>[expression]</code> actually plays with, with the original file structure as follows</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>├── alice.h
</span></span><span class=line><span class=cl>├── andy
</span></span><span class=line><span class=cl>│   ├── jack
</span></span><span class=line><span class=cl>│   │   └── mary.h
</span></span><span class=line><span class=cl>│   ├── mark.cpp
</span></span><span class=line><span class=cl>│   ├── mark.h
</span></span><span class=line><span class=cl>│   └── pony.txt
</span></span><span class=line><span class=cl>├── andy.c
</span></span><span class=line><span class=cl>├── bill.cpp
</span></span><span class=line><span class=cl>├── bill.h
</span></span><span class=line><span class=cl>├── mark.h
</span></span><span class=line><span class=cl>└── mary
</span></span></code></pre></div><p>Now, I want to find the file named <code>andy</code>, what should I write the command. Intuition tells me it should be something like the following</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find andy
</span></span></code></pre></div><p>But is the intuition right? Let&rsquo;s look at the output</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>andy
</span></span><span class=line><span class=cl>andy/mark.cpp
</span></span><span class=line><span class=cl>andy/jack
</span></span><span class=line><span class=cl>andy/jack/mary.h
</span></span><span class=line><span class=cl>andy/pony.txt
</span></span><span class=line><span class=cl>andy/mark.h
</span></span></code></pre></div><p>It only finds the <code>andy</code> directory, not even <code>andy.c</code>, so it seems that we need a way to tell <code>find</code> that we&rsquo;re looking for something that&rsquo;s a file, not a directory, and that option is <code>-type</code>.
The option <code>-type</code> takes a parameter immediately after <code>-type</code>, which is commonly taken as <code>d</code> for directories and <code>f</code> for files. Now we need to find files, so we should add the <code>-type f</code> option. But is that enough? If you execute the command, you&rsquo;ll see an error, because the <code>andy</code> at the end is considered to be a path, whereas we&rsquo;re looking for a filename. So, we need the help of another option, <code>-name</code>. <code>-name</code> can be followed by a specific name or a regular. Combining these two conditions, we arrive at the final command</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -type f -name <span class=s2>&#34;andy*&#34;</span>
</span></span></code></pre></div><p>Two things are worth noting here, first of all <code>-type</code> and <code>-name</code> are actually two separate options that can be used individually or in combination, and when used in combination, when they are not connected by an operator (<code>-o</code>(Or), <code>-a</code>(AND),<code>-not</code>), <code>-a</code> alone is used as a concatenation, which means that all the conditions are met before they appear back in the the final result. From this, a reverse lookup method can be extended that</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -type f -not -name <span class=s2>&#34;andy*&#34;</span>
</span></span></code></pre></div><p>This command will then find all files that do not start with <code>andy</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./andy/mark.cpp
</span></span><span class=line><span class=cl>./andy/jack/mary.h
</span></span><span class=line><span class=cl>./andy/pony.txt
</span></span><span class=line><span class=cl>./andy/mark.h
</span></span><span class=line><span class=cl>./bill.h
</span></span><span class=line><span class=cl>./bill.cpp
</span></span><span class=line><span class=cl>./mark.h
</span></span><span class=line><span class=cl>./alice.h
</span></span></code></pre></div><p>Another point worth noting is that <code>"andy*"</code> is enclosed in double quotes because <code>*</code> is a special character, so it needs to be enclosed in double quotes; if there were no special characters, there would be no need for double quotes. Going back to the original command, why didn&rsquo;t the first command we took for granted find the target we were hoping for? Because <code>find</code> is a strict match, we only wrote <code>andy</code> and left out the suffix <code>.c</code>, which is the easiest place to make a mistake.
In fact, by this point, we&rsquo;ve learned 50% of this command, so what&rsquo;s in the rest? Remember the main function of <code>find</code>, which mentions a directory structure? That&rsquo;s right, <code>find</code> can also control the scope of the search.</p><p>Here comes a new requirement, how to find all direct sub <code>.h</code> files in a certain directory? Here direct and child together means that the scope of the search can only be the current directory, not the subdirectories of the current directory. Before solving this problem, we need to know one thing - there are two kinds of interrelationships between two directories, brother or father and son. A brother directory has the same depth, while a parent-child directory has a depth difference of 1. Knowing this, let&rsquo;s look at the requirements - <code>.h</code> files are simple enough to be satisfied using <code>-name "*.h"</code>. However, this will find <code>.h</code> files in the <code>andy</code> directory, so we need something that controls the level of directory lookup, and they are <code>-mindepth</code>, <code>maxdepth</code>. These two parameters are not the same as the previous ones, they belong to <code>Global options</code>. What&rsquo;s meant by <code>Global options</code> is that they are global in their effect, and they always return <code>true</code>, which means that they are only considered in conjunction with other options. And, to emphasize their global nature, they must be written at the top of the command, otherwise a warning will be triggered. As below, they are written before <code>-name "*.h"</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -maxdepth <span class=m>1</span> -name <span class=s2>&#34;*.h&#34;</span>
</span></span></code></pre></div><p>These two parameters are a bit counter-intuitive, can be understood in this way - up to where to find a maximum, there is a maximum, is <code>maxdepth</code>, the reverse is from where to start looking, is <code>mindepth</code>.</p><p>After talking about the directory structure, the name of these obvious parts, the file also has access (<code>access</code>) create (<code>create</code>), modify (<code>modiffy</code>) time, permissions (<code>permission</code>), the size (<code>size</code>) of these are not involved, and these can be used as a <code>find</code> find conditions, before you start, there are some small Before we get started, there are a few rules to do a quick grouping of these options - the options will start with the first letter of the attribute, such as</p><ul><li>Time-related options are <code>time</code> and <code>min</code>, which denote the <code>n</code> days and <code>n</code> minutes before an event occurs, respectively, where an event can be replaced by <code>a</code> (<code>access</code>) <code>c</code>create<code>, </code>m<code>modify</code>, which combine to make a complete option, e.g., <code>mmin n</code> would means to look for files that have been modified within <code>n</code> minutes.</li><li>By analogy, <code>i</code> stands for case-sensitive, as in <code>iname</code>, <code>l</code> for <code>link</code> files.</li></ul><p>Of course, these may not be used much, the actual use to check again may also be more convenient, but there are two very good options have to talk about.
Consider the following scenario, one day old Ben sent a bunch of user log files, let you give these users according to the frequency of use of grading, what should you do? First of all, we can use the size of the log file as a basis, according to the largest and smallest division of a good interval, such as (0-100M), and then set a good level (such as 5 levels) divided into intervals of each level (0-20, 20-40, &mldr; ) , so that we run the command several times and get all the grading. The idea is wonderful, but does <code>find</code> provide that option yet? It provides <code>-size n</code>. Let&rsquo;s try to find files in the 0-20 range</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -size 20M
</span></span></code></pre></div><p>Enter, and you&rsquo;ll see that the results don&rsquo;t seem to be exactly right, it may have found some files that meet the conditions, but not some that do, so what&rsquo;s the problem? It turns out that the <code>n</code> in <code>-size n</code> is a strict match, that is, if you enter 20M, it will only find files that happen to be 20M, not 20M and 20M or so as we expect. So is there a solution, of course there is, is the number in front of the <code>+</code>, <code>-</code> sign, <code>+</code> means greater than or equal to the value, <code>-</code> means less than. So our command to find files under 20M should be</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -size -20M
</span></span></code></pre></div><p>Having resolved the issue of sign, there is also the issue of units which is worth noting, namely the <code>M</code> in <code>-20M</code>. Actually, the standard form of <code>-size</code> is <code>-size [+-]n[cwbkMG]</code>. <code>[+-]</code> and <code>n</code> are stated, and those that follow are units. They are listed in increasing order of size and are described as follows</p><ul><li><code>c</code>: byte</li><li><code>w</code>: double byte, also known as <code>word</code>.</li><li><code>b</code>: block of 512 bytes, <em><strong>this is the default if the number <code>n</code> is not followed by units</strong></em></li><li><code>k</code>: 1024 bytes, also known as kb</li><li><code>M</code>: 1024 * 1024 bytes, i.e. Mb</li><li><code>c</code>: 1024 * 1024 * 1024 bytes, i.e. Gb</li></ul><p>Having said that about units, let&rsquo;s move on to come out with a 20 - 40 grading, do we change 20 to 40 directly? Of course not, changing it to 40 finds files less than or equal to 40M, so we need an interval calibration method. <code>find</code> doesn&rsquo;t provide direct option support, but as I said before, the options are combinable, that is, we can reuse <code>-size</code> to identify an interval. That is, something like the following</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find -size +20M -size -40M
</span></span></code></pre></div><p>According to this method, change the value many times, you can complete the task.
In fact, there is still a little mistake in the above scheme, that is, we did not find out the users who have not used it, that is, the size is 0, then change the number to 0, can we? The answer is yes, but if we want to find empty directories instead of empty files, <code>-size</code> can&rsquo;t solve the problem, because usually the size of empty directories is not 0. So, <code>find</code> provides an option <code>-empty</code> to detect whether a file is empty, which can not only find empty files, but also empty directories. In our example, using <code>find -size 0</code> finds the following results</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./andy/mark.cpp
</span></span><span class=line><span class=cl>./andy/jack/mary.h
</span></span><span class=line><span class=cl>./andy/pony.txt
</span></span><span class=line><span class=cl>./andy/mark.h
</span></span><span class=line><span class=cl>./andy.c
</span></span><span class=line><span class=cl>./alice.h
</span></span></code></pre></div><p>The empty directory <code>mary</code> was not found. Instead, a search using <code>find -empty</code> resulted in the following</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./mary
</span></span><span class=line><span class=cl>./andy/mark.cpp
</span></span><span class=line><span class=cl>./andy/jack/mary.h
</span></span><span class=line><span class=cl>./andy/pony.txt
</span></span><span class=line><span class=cl>./andy/mark.h
</span></span><span class=line><span class=cl>./andy.c
</span></span><span class=line><span class=cl>./alice.h
</span></span></code></pre></div><p>Not only was the <code>mary</code> empty directory found, but other empty files were found as well.
At this point, <code>find</code> related things have been understood almost. However, in many cases, just finding is not enough to satisfy our needs, we may need to copy the found files to other places or delete them, can we combine these operations? That&rsquo;s where our <code>xargs</code> comes in.</p><h3 id=xargs class="relative group">xargs <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#xargs aria-label=Anchor>#</a></span></h3><p><code>xargs</code>只有一个简单的功能，就是从标准输入读入内容，构建并执行命令。怎么理解呢？假设我们在执行<code>find</code>命令，<code>find</code>命令执行肯定是有过程，有逻辑的。按照一定的逻辑和过程，<code>find</code>对文件进行逐一评估，假如满足条件，就输出结果。随着命令的执行，结果可能越来越多。假如我们需要对产生的每个结果都执行一条命令呢，这该怎么办？按照一般的思路，当然是将结果保存起来，然后再写个脚本，读取每一条记录，然后执行相应。但是有了<code>xargs</code>，我们不用这么麻烦了，可以一步到位。我们利用管道符将结果从终端连接到<code>xargs</code>中，<code>xargs</code>接收到一条信息，就会将它作为构建命令的参数，就好像我们手动输入了命令那样，构建完成后还会自动执行。最终的结果就是，没产生一个输出，就会产生一条以这个输出为参数的命令，并且这条命令还自动执行，最终的效果就是实现了一条命令实现了多个功能。</p><h3 id=combining-find-with-xargs class="relative group">Combining <code>find</code> with <code>xargs</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#combining-find-with-xargs aria-label=Anchor>#</a></span></h3><p>Now that we are challenged to upgrade, there is a requirement to extract all the header files in a directory to another directory. This requirement can be divided into two parts, one part is to find the header files, which can be done with the <code>find</code> command. The other part is to copy the found header files, which requires the involvement of xargs.</p><p>The first step is to find the header file. A header file is a file ending in <code>.h</code> (ignoring <code>.hpp</code> for the moment), and this suffix appears in the name, so we can use the <code>-name "*. h"</code> option, and in order to avoid interference with certain directory names, we will qualify the type as well <code>-type f</code> to look for files only. This completes the first step.
The second step is to copy the file. The standard way to copy a file is as follows</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cp <span class=o>[</span>OPTION<span class=o>]</span>... SOURCE... DIRECTORY
</span></span></code></pre></div><p>According to the format of this command, we need to determine a few parameters, the source file is of course the file we find, which will be left aside for now. The destination folder is where we copy to, so let&rsquo;s just create a new <code>test</code> directory for now, and the destination folder is <code>test</code>. Is that the end of the story? Header files often need to form a dependency path with their parent directory, so it&rsquo;s not a good idea to copy all the header files directly into the <code>test</code> directory, as this will mess up the header file dependencies, and we&rsquo;ll have to copy the parent directory associated with the header file. As it happens, <code>cp</code> provides the option <code>-parents</code> - which copies the completion filenames of the source files, i.e. the containing directories. So the crux of the matter comes down to the source file parameter.</p></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="!mb-0 !mt-0 me-4 h-24 w-24 rounded-full" width=96 height=96 alt="Deep thinking" src=/images/logo_hu9224ab2ed987e0d8e6ad569f112ae59a_19203_192x192_fill_box_center_3.png loading=lazy><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Deep thinking</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:honguilee@163.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/hongui target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/en/post/horizontal%20scrolling%20tabs%20with%20plain%20HTML,%20JS,%20CSS.html><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">horizontal scrolling tabs with plain HTML, JS, CSS</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-02-12 09:23:30 +0800 +0800">12 February 2022</time>
</span></span></a></span><span><a class="group flex text-right" href=/en/post/Introduction%20to%20Android%20NDK-basic%20concepts.html><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Introduction to Android NDK-basic concepts</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-03-06 11:30:40 +0800 +0800">6 March 2022</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
Deep thinking</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://bravebuffalo.cc/en/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>