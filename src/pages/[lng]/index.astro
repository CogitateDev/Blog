---
import Frame from "../../components/Frame.astro";
import SimplePost from "../../components/SimplePost.astro";
import Divider from "../../components/Divider.astro";
import { getPosts } from "../../lib/posts";
import { useTranslations, getStaticPaths } from "../../i18n/utils";

export { getStaticPaths };

const { lng } = await Astro.params;
const t = useTranslations(lng);
const posts = (await getPosts(lng)).slice(0, 5);
---
<Frame lng={lng} title={t("title")} description={t("description")}>
	<img src="/background.png" alt="background" />
	<h1 class="flex justify-center text-3xl m-8">{t("welcome")}</h1>
	<h2 class="text-2xl my-8">{t("last_updates")}</h2>
	{
		posts.map((post, index) => (
			<>
				<SimplePost
					key={post.id}
					url={`/${lng}/post/${post.id}`}
					title={post.data.title}
					date={post.data.publishDate}
				/>
				{index !== posts.length - 1 && <Divider />}
			</>
		))
	}
</Frame>
